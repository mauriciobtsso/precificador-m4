{# app/certidoes/templates/certidoes/_badges.html #}
{% macro tipo(certidao) %}
    {# 
        Mostra o "tipo" da certidão usando o Enum que está em certidao.tipo.
        Cada Enum tem atributo .label (visto no filtro do index).
    #}
    {% set t = certidao.tipo %}
    {% if not t %}
        <span class="badge bg-secondary text-wrap">Sem tipo</span>
    {% else %}
        <span class="badge bg-dark text-light text-wrap">
            {{ t.label }}
        </span>
    {% endif %}
{% endmacro %}


{% macro status(certidao) %}
    {# 
        Mostra o "status" da certidão usando o Enum em certidao.status.
        Também usa o atributo .label dos Enums (CertidaoStatus).
    #}
    {% set s = certidao.status %}
    {% if not s %}
        <span class="badge bg-secondary text-wrap">Sem status</span>
    {% else %}
        {# Classe de cor conforme o status.name #}
        {% set css = 'bg-secondary' %}
        {% if s.name == 'PENDENTE' %}
            {% set css = 'bg-warning text-dark' %}
        {% elif s.name == 'EM_PROCESSO' %}
            {% set css = 'bg-info text-dark' %}
        {% elif s.name == 'EMITIDA' %}
            {% set css = 'bg-success' %}
        {% elif s.name == 'ERRO' %}
            {% set css = 'bg-danger' %}
        {% elif s.name == 'CANCELADA' %}
            {% set css = 'bg-secondary' %}
        {% endif %}

        <span class="badge {{ css }} text-wrap">
            {{ s.label }}
        </span>
    {% endif %}
{% endmacro %}
