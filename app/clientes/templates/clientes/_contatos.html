<div class="card mb-4">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0"><i class="fas fa-address-book"></i> Contatos</h5>
    <!-- Botão adicionar contato -->
    <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#modalAddContato">
      <i class="fas fa-plus"></i> Adicionar
    </button>
  </div>
  <div class="card-body">
    {% if contatos %}
      <ul class="list-group">
        {% for c in contatos %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <!-- Badge por tipo -->
              {% if c.tipo|lower == 'telefone' %}
                <span class="badge bg-primary me-2">Telefone</span>
              {% elif c.tipo|lower == 'celular' %}
                <span class="badge bg-success me-2">Celular</span>
              {% elif c.tipo|lower == 'whatsapp' %}
                <span class="badge bg-success me-2"><i class="fab fa-whatsapp"></i> WhatsApp</span>
              {% elif c.tipo|lower == 'email' %}
                <span class="badge bg-warning text-dark me-2">E-mail</span>
              {% else %}
                <span class="badge bg-secondary me-2">{{ c.tipo|capitalize }}</span>
              {% endif %}
              {{ c.valor }}
            </div>

            <!-- Ações -->
            <div class="btn-group btn-group-sm">
              <a href="{{ url_for('clientes.editar_contato', cliente_id=cliente.id, contato_id=c.id) }}"
                 class="btn btn-outline-warning">
                <i class="fas fa-edit"></i>
              </a>
              <form method="POST"
                    action="{{ url_for('clientes.deletar_contato', cliente_id=cliente.id, contato_id=c.id) }}"
                    class="d-inline"
                    onsubmit="return confirm('Deseja realmente excluir este contato?')">
                <button type="submit" class="btn btn-outline-danger">
                  <i class="fas fa-trash"></i>
                </button>
              </form>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted">Nenhum contato cadastrado.</p>
    {% endif %}
  </div>
</div>

<!-- Modal para adicionar contato -->
<div class="modal fade" id="modalAddContato" tabindex="-1" aria-labelledby="modalAddContatoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form method="POST" action="{{ url_for('clientes.adicionar_contato', cliente_id=cliente.id) }}">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalAddContatoLabel"><i class="fas fa-plus"></i> Novo Contato</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="tipo" class="form-label">Tipo</label>
            <select class="form-select" id="tipo" name="tipo" required>
              <option value="telefone">Telefone</option>
              <option value="celular">Celular</option>
              <option value="whatsapp">WhatsApp</option>
              <option value="email">E-mail</option>
              <option value="outro">Outro</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="valor" class="form-label">Valor</label>
            <input type="text" class="form-control" id="valor" name="valor" placeholder="Digite o contato" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Salvar
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
