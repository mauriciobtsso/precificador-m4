<!-- ====================== -->
<!-- ABA: PROCESSOS -->
<!-- ====================== -->

<div class="card shadow-sm mb-4">
  <div class="card-header d-flex justify-content-between align-items-center bg-white border-bottom">
    <h5 class="mb-0">
      <i class="fas fa-list me-2 text-primary"></i> Processos
    </h5>
    <a href="{{ url_for('clientes.novo_processo', cliente_id=cliente.id) }}" class="btn btn-sm btn-primary">
      <i class="fas fa-plus"></i> Novo
    </a>
  </div>

  <div class="card-body p-0">
    {% if cliente.processos %}
      <div class="table-responsive">
        <table class="table table-hover mb-0 align-middle">
          <thead class="table-light">
            <tr>
              <th style="width: 20%">Tipo</th>
              <th style="width: 15%">Status</th>
              <th style="width: 35%">Descrição</th>
              <th style="width: 15%">Data</th>
              <th style="width: 15%" class="text-center">Ações</th>
            </tr>
          </thead>
          <tbody>
            {% for proc in cliente.processos %}
            <tr>
              <!-- Tipo -->
              <td class="fw-semibold text-dark">{{ proc.tipo }}</td>

              <!-- Status -->
              <td>
                {% if proc.status == "Concluído" %}
                  <span class="badge bg-success d-inline-flex align-items-center">
                    <i class="fas fa-check-circle me-1"></i> {{ proc.status }}
                  </span>
                {% elif proc.status == "Em andamento" %}
                  <span class="badge bg-info text-dark d-inline-flex align-items-center">
                    <i class="fas fa-spinner me-1"></i> {{ proc.status }}
                  </span>
                {% elif proc.status == "Cancelado" %}
                  <span class="badge bg-danger d-inline-flex align-items-center">
                    <i class="fas fa-times-circle me-1"></i> {{ proc.status }}
                  </span>
                {% else %}
                  <span class="badge bg-secondary">{{ proc.status }}</span>
                {% endif %}
              </td>

              <!-- Descrição -->
              <td class="text-muted small">
                {{ proc.descricao or "—" }}
              </td>

              <!-- Data -->
              <td>{{ proc.data.strftime("%d/%m/%Y %H:%M") if proc.data else "-" }}</td>

              <!-- Ações -->
              <td class="text-center">
                <div class="btn-group btn-group-sm" role="group">
                  <!-- Editar -->
                  <a href="{{ url_for('clientes.editar_processo', cliente_id=cliente.id, proc_id=proc.id) }}"
                     class="btn btn-outline-warning" title="Editar">
                    <i class="fas fa-edit"></i>
                  </a>
                  <!-- Excluir -->
                  <form method="POST"
                        action="{{ url_for('clientes.excluir_processo', cliente_id=cliente.id, proc_id=proc.id) }}"
                        onsubmit="return confirm('Deseja realmente excluir este processo?')"
                        class="d-inline">
                    <button type="submit" class="btn btn-outline-danger" title="Excluir">
                      <i class="fas fa-trash"></i>
                    </button>
                  </form>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="p-3 text-center text-muted">
        <i class="fas fa-info-circle me-2"></i> Nenhum processo registrado.
      </div>
    {% endif %}
  </div>
</div>
